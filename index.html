<!DOCTYPE html>
<html>
<head>
        <link href="./index.css" type="text/css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="./controller.js"></script>


  <title>Find Similar Records</title>
</head>
<body>

        <fieldset>
                <legend>Find Similar Records</legend>
                <div class="wrapper">
                <div class="grid-header">
                    <div class="header-item"></div>
                    <div class="header-item" title="Regular Search">
                      <div>Exact</div>
                    </div>
                    <div class="header-item" title="Fuzzy">Approx</div>
                    <div class="header-item" title="More Like This">MLT</div>
                    <div class="header-item" title="Boost">Boost</div>
                  </div>
                  
                  <!--Each Grid Row amounts to ONE Entity Identifier -->
                  <div class="grid-row">
                    <div class="flex-item">City</div>
                    
                    <label class="flex-item">
                      <input type="radio" value="critical" name="city"> <span></span>
                    </label>
                    
                    <label class="flex-item">
                      <input type="radio" value="high" name="city"> <span></span>
                    </label>
                    
                    <label class="flex-item">
                      <input type="radio" value="medium" name="city"> <span></span>
                    </label>
                    
                    <label class="flex-item">
                      <div class="slider boost">
                        <div class="range-slider">
                          <input class="range-slider__range" type="range" value="1" min="1" max="4">
                            <span class="range-slider__value">1</span> 
                         </div>
                       </div>
                    </label>
                    
                  </div>
                  <!--Each Previous ^^ Grid Row was ONE Entity Identifier -->
                  <!--Each Grid Row amounts to ONE Entity Identifier -->
                  <div class="grid-row">
                    <div class="flex-item">Email</div>
                    
                    <label class="flex-item">
                      <input type="radio" value="email-auto" name="priority"> <span></span>
                    </label>
                    
                    <label class="flex-item">
                      <input type="radio" value="email-fuzzy" name="priority"> <span></span>
                    </label>
                    
                    <label class="flex-item">
                      <input type="radio" value="email-mlt" name="priority"> <span></span>
                    </label>
                    
                    <label class="flex-item">
                      <div class="slider boost">
                        <div class="range-slider">
                          <input class="range-slider__range" type="range" value="1" min="1" max="4">
                            <span class="range-slider__value">1</span> 
                         </div>
                       </div>
                    </label>
                    
                  </div>
                  <!--Each Previous ^^ Grid Row was ONE Entity Identifier -->
                  
                <div class="grid-row">
                  <div class="selecter" style="float:left; width: 30%;">
                    <label>
                      <input type="checkbox" value="impact" name="consult-sig-sme"> <span>Time Filter</span>
                    </label>
                  </div>
                  <div class="slider time">
                      <div class="time-dropdown" style="float: left;"><select>
                          <option value="" selected disabled hidden>Choose here</option>
                          <option value="1">One</option>
                          <option value="2">Two</option>
                          <option value="3">Three</option>
                          <option value="4">Four</option>
                          <option value="5">Five</option>
                        </select>
                      </div>
                      <div class="range-slider">
                          <input class=" days" type="text" value="0" min="0" max="5000"><div style="float: left;margin: 5px;">days</div>
                          <input class=" months" type="text" value="0" min="0" max="5000"><div style="float: left;margin: 5px;">mths</div>
                          <input class=" years" type="text" value="0" min="0" max="5000"><div style="float: left;margin: 5px;">yrs</div>
                        <!-- <input class="range-slider__range" type="range" value="100" min="0" max="500">
                        <span class="range-slider__value">0</span> days -->
                     </div>
                  </div>
                </div>
                
                <div class="grid-row">
                  <div class="selecter" style="float:left; width: 30%;">
                    <label>
                      <input type="checkbox" value="impact" name="consult-sig-sme"> <span>Geo Filter</span>
                    </label>
                  </div>
                  <div class="slider geo" style="float: left;">
                    <div class="geo-dropdown" style="float: left;"><select>
                        <option value="" selected disabled hidden>Choose here</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                        <option value="4">Four</option>
                        <option value="5">Five</option>
                      </select>
                    </div>
                  
                      <div class="range-slider">
                        
                          <input class="metres" type="text" value="0" min="0" max="5000"><div style="float: left;margin: 5px;">m</div>
                          <input class="km" type="text" value="0" min="0" max="5000"><div style="float: left;margin: 5px;">km</div>
                        <!-- <input class="range-slider__range" type="range" value="100" min="0" max="500"> -->
                        <!-- <span class="range-slider__value"></span> km -->
                     </div>
                  </div>
                </div>
                
                <div class="grid-row">
                  <div class="selecter" style="float:left; width: 30%;">
                    <label>
                      <input type="checkbox" value="impact" name="consult-sig-sme"> <span>Limit Results</span>
                    </label>
                  </div>
                  <div class="slider limit">
                      <div class="range-slider">
                        <input class="range-slider__range" type="range" value="5" min="0" max="20">
                        <span class="range-slider__value">0</span> top results
                     </div>
                  </div>
                </div>
                
                
              
                <div>
                  <button class="btn btn-save">Find Records</button>
                </div>
                </div>
              </fieldset>
              
              
</body>
<script>
rangeSlider();
constructCompoundQuery();

const btn = document.querySelector('button');
    btn.addEventListener('click',getData);
    
    function getData(e){
      d = constructCompoundQuery([{mlt:true},{fuzzy:true}], true, true);
      console.log(d)
        $.ajax({
        url : 'http://localhost:9220/company/_search',
        contentType: "application/json",
        method : 'POST',
        dataType: "json",
        data: d,
        headers: {"Access-Control-Allow-Origin": "*"},
        success : function(data){
           console.log(data);
        },
      
        error: function(err){
          console.log('Failed');
        }
   })};
</script>
</html>